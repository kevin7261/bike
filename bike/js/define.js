
var VERSION = {
	YOUBIKE: 0, 
	COMPARE: 1
}

var SECTION = {
	YOUBIKE: 0, 
	BERLIN: 1
}

var LANGUAGE = {
	EN: 0, 
	ZH: 1, 
	DE: 2
}

var DRAW_CONTENT = {
  INTRO: 0,
  WEEKLY_YOUBIKE: 1,
  WEEKLY_BERLIN: 2,
  DAILY_YOUBIKE: 3,
  DAILY_BERLIN: 4,
  HOURLY_YOUBIKE: 5,
  HOURLY_BERLIN: 6,
  DURATION_DISTANCE_YOUBIKE: 7,
  DURATION_DISTANCE_BERLIN: 8,
  MESH_YOUBIKE: 9,
  MESH_BERLIN: 10
}

var g_version = VERSION.COMPARE // 0:youtube 1:berlin
var g_language = LANGUAGE.EN // 0:en 1:zh 2:de
var g_draw_content = DRAW_CONTENT.INTRO

// -------------------

const COLOR_WHITE = "#FEFEFE"
const COLOR_GREY = "#999999"
const COLOR_MAIN = "#014666"
const COLOR_RED = "#FFA07A"
const COLOR_GREEN = "#90EE90"
const COLOR_BLUE = "#87CEFA"
const COLOR_BROWN = "#D2B48C"

let INDEX_WEEKDAY = [];

for (w = 0; w < 7; w++)
    INDEX_WEEKDAY.push(w)

let INDEX_HOUR = [];

for (h = 0; h < 24; h++)
    INDEX_HOUR.push(h)

const SCALE_COLOR_BLUE = d3.scaleOrdinal()
                              .domain(INDEX_WEEKDAY)
                              .range([COLOR_BLUE,
                                      COLOR_BLUE,
                                      COLOR_BLUE,
                                      COLOR_BLUE,
                                      COLOR_BLUE,
                                      COLOR_GREEN,
                                      COLOR_GREEN])

const STROKE_WIDTH = 3;

const RECT_ROUND = 3;

const LABEL_WIDTH = 35;
const LABEL_HEIGHT = 15;

const TEXT_GAP = 6
const TEXT_GAP_MAX = 20

// -------------------

const FORMAT_COMMA = d3.format(",")
const FORMAT_K = d3.format(".1s")
const FORMAT_K_2 = d3.format(".2s")
const FORMAT_K_3 = d3.format(".3s")
const FORMAT_PERCENT = d3.format(".0%")
const FORMAT_PERCENT_2 = d3.format(".2%")

// -------------------

    path_river_1_youbike  = [[17.5,  9.5], 
                  [16.5,  9.5], 
                  [15.5,  9.5], 
                  [14.5,  9.5], 
                  [13.5,  9.5], 
                  [13.5,  8.5], 
                  [12.5,  8.5], 
                  [11.5,  8.5], 
                  [11.5,  9.5], 
                  [11.5, 10.5], 
                  [11.5, 11.5], 
                  [10.5, 11.5], 
                  [ 9.5, 11.5], 
                  [ 8.5, 11.5], 
                  [ 7.5, 11.5], 
                  [ 6.5, 11.5], 
                  [ 5.5, 11.5], 
                  [ 5.5, 12.5], 
                  [ 5.5, 13.5], 
                  [ 4.5, 13.5], 
                  [ 4.5, 14.5], 
                  [ 3.5, 14.5], 
                  [ 2.5, 14.5], 
                  [ 1.5, 14.5], 
                  [ 1.5, 13.5]]


    path_river_2_youbike  = [[-0.5, 15.5], 
    				[-0.5, 14.5], 
                    [-0.5, 13.5], 
                    [ 1.5, 13.5], 
                    [ 2.5, 13.5],
                    [ 2.5, 12.5],
                    [ 3.5, 12.5],
                    [ 3.5, 11.5],
                    [ 4.5, 11.5],
                    [ 4.5, 10.5],
                    [ 4.5,  9.5],
                    [ 4.5,  8.5],
                    [ 3.5,  8.5],
                    [ 2.5,  8.5],
                    [ 2.5,  7.5],
                    [ 2.5,  6.5],
                    [ 2.5,  5.5],
                    [ 2.5,  4.5],
                    [ 3.5,  4.5],
                    [ 4.5,  4.5],
                    [ 5.5,  4.5],
                    [ 6.5,  4.5],
                    [ 6.5,  3.5],
                    [ 7.5,  3.5],
                    [ 7.5,  2.5],
                    [ 7.5,  1.5],
                    [ 8.5,  1.5],
                    [ 9.5,  1.5],
                    [ 9.5,  0.5],
                    [10.5,  0.5],
                    [10.5,  1.5],
                    [11.5,  1.5],
                    [11.5,  2.5],
                    [12.5,  2.5],
                    [12.5,  3.5],
                    [13.5,  3.5],
                    [14.5,  3.5],
                    [15.5,  3.5]]


    path_mountain_1_youbike  = [[ 9.5,  25.5], 
                       [11.5,  25.5],
                       [11.5,  24.5],
                       [11.5,  23.5],
                       [12.5,  23.5],
                       [13.5,  23.5],
                       [13.5,  22.5],
                       [13.5,  21.5],
                       [13.5,  20.5],
                       [14.5,  20.5],
                       [14.5,  19.5],
                       [14.5,  18.5],
                       [14.5,  17.5],
                       [15.5,  17.5],
                       [15.5,  16.5],
                       [15.5,  15.5],
                       [14.5,  15.5],
                       [14.5,  14.5],
                       [15.5,  14.5],
                       [16.5,  14.5],
                       [16.5,  13.5],
                       [17.5,  13.5],
                       [17.5,  12.5],
                       [17.5,  11.5],
                       [17.5,  10.5],
                       [16.5,  10.5],
                       [16.5,  11.5],
                       [15.5,  11.5],
                       [15.5,  12.5],
                       [14.5,  12.5],
                       [13.5,  12.5],
                       [12.5,  12.5],
                       [11.5,  12.5],
                       [10.5,  12.5],
                       [ 9.5,  12.5],
                       [ 8.5,  12.5],
                       [ 8.5,  11.5],
                       [ 7.5,  11.5],
                       [ 7.5,  12.5],
                       [ 7.5,  13.5],
                       [ 8.5,  13.5],
                       [ 8.5,  14.5],
                       [ 8.5,  15.5],
                       [ 8.5,  16.5],
                       [ 7.5,  16.5],
                       [ 6.5,  16.5],
                       [ 5.5,  16.5],
                       [ 5.5,  17.5],
                       [ 5.5,  18.5],
                       [ 4.5,  18.5],
                       [ 3.5,  18.5],
                       [ 2.5,  18.5],
                       [ 2.5,  19.5],
                       [ 3.5,  19.5],
                       [ 3.5,  20.5],
                       [ 4.5,  20.5],
                       [ 5.5,  20.5],
                       [ 6.5,  20.5],
                       [ 6.5,  21.5],
                       [ 6.5,  22.5],
                       [ 7.5,  22.5],
                       [ 8.5,  22.5],
                       [ 8.5,  23.5],
                       [ 9.5,  23.5],
                       [ 9.5,  24.5]]

    path_mountain_2_youbike  = [[17.5,  7.5],
                       [18.5,  7.5],
                       [19.5,  7.5],
                       [20.5,  7.5],
                       [21.5,  7.5],
                       [21.5,  6.5],
                       [21.5,  5.5],
                       [20.5,  5.5],
                       [19.5,  5.5],
                       [18.5,  5.5],
                       [17.5,  5.5],
                       [17.5,  4.5],
                       [16.5,  4.5],
                       [15.5,  4.5],
                       [15.5,  3.5],
                       [15.5,  2.5],
                       [15.5,  1.5],
                       [16.5,  1.5],
                       [16.5,  0.5],
                       [16.5, -0.5],
                       [15.5, -0.5],
                       [14.5, -0.5],
                       [13.5, -0.5],
                       [12.5, -0.5],
                       [11.5, -0.5],
                       [10.5, -0.5],
                       [ 9.5, -0.5],
                       [ 9.5,  0.5],
                       [10.5,  0.5],
                       [10.5,  1.5],
                       [11.5,  1.5],
                       [12.5,  1.5],
                       [12.5,  2.5],
                       [12.5,  3.5],
                       [11.5,  3.5],
                       [10.5,  3.5],
                       [10.5,  2.5],
                       [ 9.5,  2.5],
                       [ 9.5,  3.5],
                       [ 8.5,  3.5],
                       [ 8.5,  4.5],
                       [ 9.5,  4.5],
                       [ 9.5,  5.5],
                       [10.5,  5.5],
                       [11.5,  5.5],
                       [11.5,  6.5],
                       [12.5,  6.5],
                       [12.5,  7.5],
                       [13.5,  7.5],
                       [13.5,  8.5],
                       [14.5,  8.5],
                       [15.5,  8.5],
                       [15.5,  7.5],
                       [15.5,  6.5],
                       [16.5,  6.5],
                       [16.5,  7.5]]

    path_airport_youbike  = [[10.5, 11.5], 
                    [11.5, 11.5], 
                    [11.5, 10.5], 
                    [10.5, 10.5], 
                    [10.5,  9.5], 
                    [ 9.5,  9.5], 
                    [ 9.5, 10.5], 
                    [ 8.5, 10.5], 
                    [ 8.5, 11.5],
                    [ 9.5, 11.5], 
                    [10.5, 11.5] 
                    ]

    path_contour_youbike = [[-0.5, 15.5], 
    				[-0.5, 16.5], 
                    [ 0.5, 16.5], 
                    [ 0.5, 17.5], 
                    [ 1.5, 17.5], 
                    [ 1.5, 18.5], 
                    [ 2.5, 18.5], 
                    [ 2.5, 19.5], 
                    [ 3.5, 19.5], 
                    [ 3.5, 20.5], 
                    [ 4.5, 20.5], 
                    [ 5.5, 20.5], 
                    [ 6.5, 20.5], 
                    [ 6.5, 21.5], 
                    [ 6.5, 22.5], 
                    [ 7.5, 22.5], 
                    [ 8.5, 22.5], 
                    [ 8.5, 23.5], 
                    [ 9.5, 23.5], 
                    [ 9.5, 24.5], 
                    [ 9.5, 25.5], 
                    [10.5, 25.5], 
                    [11.5, 25.5], 
                    [11.5, 24.5], 
                    [11.5, 23.5], 
                    [12.5, 23.5], 
                    [13.5, 23.5], 
                    [13.5, 22.5], 
                    [13.5, 21.5], 
                    [13.5, 20.5], 
                    [14.5, 20.5], 
                    [14.5, 19.5], 
                    [14.5, 18.5], 
                    [14.5, 17.5], 
                    [15.5, 17.5], 
                    [15.5, 16.5], 
                    [15.5, 15.5], 
                    [14.5, 15.5], 
                    [14.5, 14.5], 
                    [15.5, 14.5], 
                    [16.5, 14.5], 
                    [16.5, 13.5], 
                    [17.5, 13.5], 
                    [17.5, 12.5], 
                    [17.5, 11.5], 
                    [17.5, 10.5], 
                    [17.5,  9.5], 
                    [17.5,  8.5], 
                    [17.5,  7.5], 
                    [18.5,  7.5], 
                    [19.5,  7.5], 
                    [20.5,  7.5], 
                    [21.5,  7.5], 
                    [21.5,  6.5], 
                    [21.5,  5.5], 
                    [20.5,  5.5], 
                    [19.5,  5.5], 
                    [18.5,  5.5], 
                    [17.5,  5.5], 
                    [17.5,  4.5], 
                    [16.5,  4.5], 
                    [15.5,  4.5], 
                    [15.5,  3.5], 
                    [15.5,  2.5], 
                    [15.5,  1.5], 
                    [16.5,  1.5], 
                    [16.5,  0.5], 
                    [16.5, -0.5], 
                    [15.5, -0.5], 
                    [14.5, -0.5], 
                    [13.5, -0.5], 
                    [12.5, -0.5], 
                    [11.5, -0.5], 
                    [10.5, -0.5], 
                    [ 9.5, -0.5], 
                    [ 9.5,  0.5],
                    [ 9.5,  1.5],
                    [ 8.5,  1.5],
                    [ 7.5,  1.5],
                    [ 7.5,  2.5],
                    [ 7.5,  3.5],
                    [ 6.5,  3.5],
                    [ 6.5,  4.5],
                    [ 5.5,  4.5],
                    [ 4.5,  4.5],
                    [ 3.5,  4.5],
                    [ 2.5,  4.5],
                    [ 2.5,  5.5],
                    [ 2.5,  6.5],
                    [ 2.5,  7.5],
                    [ 2.5,  8.5],
                    [ 3.5,  8.5],
                    [ 4.5,  8.5],
                    [ 4.5,  9.5],
                    [ 4.5, 10.5],
                    [ 4.5, 11.5],
                    [ 3.5, 11.5],
                    [ 3.5, 12.5],
                    [ 2.5, 12.5], 
                    [ 2.5, 13.5], 
                    [ 1.5, 13.5], 
                    [-0.5, 13.5], 
                    [-0.5, 14.5], 
                    [-0.5, 15.5]]

// ---------------------------------------------------

    path_river_1_berlin = [
                   [ 2.5,  7.5],
                   [ 2.5,  6.5],
                   [ 3.5,  6.5],
                   [ 4.5,  6.5],
                   [ 5.5,  6.5],
                   [ 6.5,  6.5],
                   [ 7.5,  6.5],
                   [ 8.5,  6.5],
                   [ 9.5,  6.5],
                   [ 9.5,  5.5]]

    path_river_2_berlin = [
                   [ 8.5,  6.5],
                   [ 8.5,  5.5],
                   [ 9.5,  5.5],
                   [10.5,  5.5],
                   [11.5,  5.5],
                   [11.5,  4.5],
                   [12.5,  4.5],
                   [13.5,  4.5],
                   [14  ,  4.5]]

    path_river_3_berlin = [
                   [ 3.5,  7.5],
                   [ 3.5,  6.5],
                   [ 3.5,  5.5],
                   [ 4.5,  5.5],
                   [ 5.5,  5.5],
                   [ 6.5,  5.5],
                   [ 6.5,  4.5],
                   [ 7.5,  4.5],
                   [ 8.5,  4.5],
                   [ 9.5,  4.5],
                   [ 9.5,  3.5],
                   [10.5,  3.5],
                   [11.5,  3.5],
                   [11.5,  2.5],
                   [12.5,  2.5],
                   [13.0,  2.5]]

    path_river_4_berlin = [
                   [12.5,  4.5],
                   [12.5,  3.5],
                   [11.5,  3.5],
                   [10.5,  3.5]]

    path_park_1_berlin = [
                   [ 4.5, 6.5],
                   [ 5.5, 6.5],
                   [ 6.5, 6.5],
                   [ 7.5, 6.5],
                   [ 7.5, 5.5],
                   [ 6.5, 5.5],
                   [ 5.5, 5.5],
                   [ 4.5, 5.5]]

    path_park_2_berlin = [
                   [ 7.5, 2.5],
                   [ 8.5, 2.5],
                   [ 9.5, 2.5],
                   [10.5, 2.5],
                   [10.5, 1.5],
                   [10.5, 0.5],
                   [ 9.5, 0.5],
                   [ 8.5, 0.5],
                   [ 8.5, 1.5],
                   [ 7.5, 1.5]]

    path_contour_berlin = [
                   [ 3.5,  7.5],
                   [ 4.5,  7.5],
                   [ 4.5,  8.5],
                   [ 5.5,  8.5],
                   [ 6.5,  8.5],
                   [ 6.5,  9.5],
                   [ 7.5,  9.5],
                   [ 8.5,  9.5],
                   [ 9.5,  9.5],
                   [10.5,  9.5],
                   [10.5,  8.5],
                   [11.5,  8.5],
                   [12.5,  8.5],
                   [12.5,  7.5],
                   [13.5,  7.5],
                   [13.5,  6.5],
                   [14.5,  6.5],
                   [14.5,  5.5],
                   [14.5,  4.5],
                   [13.5,  4.5],
                   [13.5,  3.5],
                   [13.5,  2.5],
                   [12.5,  2.5],
                   [12.5,  1.5],
                   [12.5,  0.5],
                   [11.5,  0.5],
                   [10.5,  0.5],
                   [ 9.5,  0.5],
                   [ 8.5,  0.5],
                   [ 8.5,  1.5],
                   [ 7.5,  1.5],
                   [ 6.5,  1.5],
                   [ 6.5,  2.5],
                   [ 5.5,  2.5],
                   [ 4.5,  2.5],
                   [ 3.5,  2.5],
                   [ 2.5,  2.5],
                   [ 2.5,  3.5],
                   [ 1.5,  3.5],
                   [ 1.5,  4.5],
                   [ 1.5,  5.5],
                   [ 1.5,  6.5],
                   [ 1.5,  7.5],
                   [ 2.5,  7.5]]

// -------------------------------------------------

    let contour_new_taipei = [[ 5,  0],
                              [ 6,  0],
                              [ 7,  0],
                              [ 8,  0],
                              [ 8,  1],
                              [ 8,  2],
                              [ 9,  2],
                              [10,  2],
                              [10,  3],
                              [11,  3],
                              [12,  3],
                              [13,  3],
                              [13,  4],
                              [13,  5],
                              [14,  5],
                              [15,  5],
                              [15,  6],
                              [14,  6],
                              [14,  7],
                              [13,  7],
                              [12,  7],
                              [12,  8],
                              [11,  8],
                              [11,  9],
                              [10,  9],
                              [ 9,  9],
                              [ 9, 10],
                              [ 8, 10],
                              [ 7, 10],
                              [ 7, 11],
                              [ 7, 12],
                              [ 6, 12],
                              [ 6, 13],
                              [ 5, 13],
                              [ 4, 13],
                              [ 4, 12],
                              [ 3, 12],
                              [ 3, 11],
                              [ 3, 10],
                              [ 3,  9],
                              [ 2,  9],
                              [ 1,  9],
                              [ 1,  8],
                              [ 1,  7],
                              [ 1,  6],
                              [ 1,  5],
                              [ 1,  4],
                              [ 0,  4],
                              [ 0,  3],
                              [ 1,  3],
                              [ 2,  3],
                              [ 2,  2],
                              [ 3,  2],
                              [ 3,  1],
                              [ 4,  1],
                              [ 4,  0],
                              [ 5,  0]]


    let contour_taipei = [[ 6,  2],
                          [ 7,  2],
                          [ 7,  3],
                          [ 7,  4],
                          [ 7,  5],
                          [ 8,  5],
                          [ 8,  6],
                          [ 7,  6],
                          [ 7,  7],
                          [ 6,  7],
                          [ 5,  7],
                          [ 5,  6],
                          [ 4,  6],
                          [ 4,  5],
                          [ 5,  5],
                          [ 5,  4],
                          [ 4,  4],
                          [ 4,  3],
                          [ 5,  3],
                          [ 5,  2],
                          [ 6,  2],
                          [ 6,  2]]

// -------------------------------------------------

    let contour_berlin = [[ 3,  1],
                          [ 4,  1],
                          [ 5,  1],
                          [ 5,  0],
                          [ 6,  0],
                          [ 6,  1],
                          [ 6,  2],
                          [ 7,  2],
                          [ 7,  3],
                          [ 8,  3],
                          [ 8,  4],
                          [ 8,  5],
                          [ 9,  5],
                          [ 9,  6],
                          [ 9,  7],
                          [ 9,  8],
                          [ 8,  8],
                          [ 8,  7],
                          [ 7,  7],
                          [ 6,  7],
                          [ 5,  7],
                          [ 4,  7],
                          [ 3,  7],
                          [ 3,  6],
                          [ 2,  6],
                          [ 1,  6],
                          [ 1,  7],
                          [ 0,  7],
                          [ 0,  6],
                          [ 0,  5],
                          [ 0,  4],
                          [ 0,  3],
                          [ 1,  3],
                          [ 1,  2],
                          [ 2,  2],
                          [ 2,  1],
                          [ 3,  1]]


    let contour_berlin_inner = [[ 3,  3],
                                [ 4,  3],
                                [ 5,  3],
                                [ 5,  4],
                                [ 5,  5],
                                [ 4,  5],
                                [ 3,  5],
                                [ 3,  4],
                                [ 2,  4],
                                [ 2,  3],
                                [ 3,  3]]
